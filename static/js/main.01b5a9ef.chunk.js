(window["webpackJsonpreact-velib"]=window["webpackJsonpreact-velib"]||[]).push([[0],{36:function(e,t,n){e.exports=n(77)},42:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),o=n.n(l),c=(n(41),n(42),n(3)),i=n(12),s=n.n(i),u=n(27),m=n(6),d=n(7),p=n(9),E=n(8),b=n(10),h=n(28),f=n.n(h),g=n(29),k=function(e){var t=e.activeMarker;return t?r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Code de la station")),r.a.createElement("td",null,r.a.createElement("span",null,t.codeStation))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Nom de la station")),r.a.createElement("td",null,r.a.createElement("span",null,t.nomStation))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Etat de la station")),r.a.createElement("td",null,r.a.createElement("span",{style:"Operative"===t.etatStation?{color:"green"}:{color:"red"}},t.etatStation))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Nombre de bornes en station")),r.a.createElement("td",null,r.a.createElement("span",null,t.nbBornesTotal))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Nombre de bornes disponibles")),r.a.createElement("td",null,r.a.createElement("span",null,t.nbBornesDisponibles))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Nombre de v\xe9los m\xe9caniques")),r.a.createElement("td",null,r.a.createElement("span",null,t.nbVelosMecaniques))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Nombre de v\xe9los \xe9lectriques")),r.a.createElement("td",null,r.a.createElement("span",null,t.nbVelosElectriques))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Achat possible en station (CB)")),r.a.createElement("td",null,r.a.createElement("span",{style:"no"===t.achatCB?{color:"red"}:{color:"green"}},t.achatCB))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",null," Mis \xe0 jour le")),r.a.createElement("td",null,r.a.createElement("span",null,t.recordTime))))):null},v=n(30),w=n(31);function M(){var e=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  color: #888;\n  margin-top: 2rem;\n  margin-left: 20px;\n  .slider {\n    flex: 6;\n    -webkit-appearance: none;\n    width: 100%;\n    height: 15px;\n    border-radius: 5px;\n    background: #efefef;\n    outline: none;\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      appearance: none;\n      ","\n    }\n    &::-moz-range-thumb {\n      ","\n    }\n  }\n"]);return M=function(){return e},e}var y=function(e){var t=e.color,n=e.opacity;return"\n  width: 25px;\n  height: 25px;\n  background: ".concat(t,";\n  cursor: pointer;\n  outline: 5px solid #333;\n  opacity: ").concat(n,";\n  -webkit-transition: .2s;\n  transition: opacity .2s;\n")},x=w.a.div(M(),function(e){return y(e)},function(e){return y(e)}),C=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.maxMarkers,a=e.value,l=e.onChange;return r.a.createElement(x,{opacity:a>10?a/n:.1,color:t},r.a.createElement("input",{type:"range",min:10,step:10,max:n,value:a,className:"slider",onChange:function(e){return l(e.target.value)}}))}}]),t}(a.Component),S=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={maxMarkers:null,rangeMarkers:100,markers:[],showingInfoWindow:!1,activeMarker:null,selectedPlace:{position:{lat:48.8724200631,lng:2.34839523628}}},n.getUrl=function(e){return"https://opendata.paris.fr/api/records/1.0/search/?dataset=velib-disponibilite-en-temps-reel&rows="+e},n.getMarkers=Object(g.debounce)(Object(u.a)(s.a.mark(function e(){var t,a,r,l,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getUrl(n.state.rangeMarkers),e.next=3,f.a.get(t);case 3:a=e.sent,r=a.data,l=r.nhits,o=[],r.records.forEach(function(e){if(e.hasOwnProperty("geometry")){var t=e.geometry.coordinates[1],a=e.geometry.coordinates[0],r=new Date(e.record_timestamp).toLocaleDateString(),c=e.fields,i=c.station_code,s=c.station_name,u=c.station_state,m=c.nbedock,d=c.nbfreeedock,p=c.nbbike,E=c.nbebike,b=c.creditcard;o.push({codeStation:i,nomStation:s,position:{lat:t,lng:a},etatStation:u,nbBornesTotal:m,nbBornesDisponibles:d,nbVelosMecaniques:p,nbVelosElectriques:E,achatCB:b,recordTime:r})}n.setState({markers:o,maxMarkers:l})});case 8:case"end":return e.stop()}},e)})),1e3),n.onChangeMarkersRange=function(e){n.setState({rangeMarkers:e}),n.getMarkers(e)},n.onMarkerClick=function(e,t,a){var r=n.state.markers.find(function(e){return e.codeStation===t.uid});Object.assign(t,r),n.setState({activeMarker:t,activePosition:t.position,selectedPlace:e,showingInfoWindow:!0})},n.onMapClicked=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getMarkers()}},{key:"render",value:function(){var e=this,t=this.state,n=t.markers,a=t.maxMarkers,l=t.activeMarker,o=t.selectedPlace,i=t.showingInfoWindow,s=t.rangeMarkers;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"map col-md-4"},r.a.createElement(c.Map,{onClick:this.onMapClicked,google:this.props.google,zoom:12,initialCenter:{lat:o.position.lat,lng:o.position.lng}},n.map(function(t){return r.a.createElement(c.Marker,{uid:t.codeStation,key:t.codeStation,name:t.nomStation,position:t.position,onClick:e.onMarkerClick,opacity:.3})}),r.a.createElement(c.InfoWindow,{marker:l,visible:i},r.a.createElement("div",null,r.a.createElement("h6",null,o.name))))),r.a.createElement("div",{id:"infos",className:"col text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,"V\xe9lib' - Disponibilit\xe9 temps r\xe9el")),r.a.createElement("div",{className:"col-md-12 mt-4"},r.a.createElement("p",{className:"text-nowrap mb-4"},r.a.createElement("span",{style:{fontSize:"20px",marginTop:"-30px"}},s)," ","marqueurs de stations ",r.a.createElement("i",null,"efe")," vont s'afficher sur la carte, cliquez dessus."),r.a.createElement(C,{onChange:this.onChangeMarkersRange,maxMarkers:a,value:s,color:"red"})),r.a.createElement("div",{className:"col tableInfos"},l?r.a.createElement(k,{activeMarker:l}):null))))}}]),t}(a.Component),O=(n(76),Object(c.GoogleApiWrapper)({apiKey:"AIzaSyD7fqhPuLV6HNyLtwQnKB8WMQyuAbME45g"})(S));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.01b5a9ef.chunk.js.map